# GophKeeper

## Описание проекта

Проект GophKeeper состоит из клиентской и серверной частей, написанных на языке программирования Go. Клиентская часть взаимодействует с сервером через gRPC для управления пользователями, аутентификации, хранения и обработки файлов. Серверная часть предоставляет API для этих операций, используя PostgreSQL для хранения данных и Redis для временного хранения токенов.

## Основные функции

### Регистрация и аутентификация пользователей
- **Регистрация новых пользователей**: Клиент отправляет запрос на сервер с логином и паролем. Клиент автоматически генерирует SSH-ключ для каждого нового пользователя и сохраняет его на машине пользователя. Публичный ключ отправляется на сервер.
- **Аутентификация пользователей**: Клиент отправляет запрос на сервер с использованием логина и пароля. В ответ получает временный токен, зашифрованный публичным SSH-ключом пользователя.
- **Верификация двухфакторной аутентификации (2FA)**: Клиент расшифровывает временный токен своим приватным SSH-ключом и отправляет его обратно на сервер. Если токен правильный, пользователь получает JWT-токен для дальнейшей авторизации.

### Управление файлами
- **Загрузка файлов**: Клиент отправляет файлы на сервер по частям (streaming) с использованием потокового шифрования ChaCha20.
- **Получение списка файлов**: Клиент запрашивает список файлов пользователя по типу данных.
- **Скачивание файлов**: Клиент скачивает файлы с сервера по частям с использованием потокового шифрования ChaCha20.

### Файловый менеджер
- **Выбор файла для загрузки**: Клиент предоставляет интерфейс для выбора файла на локальной машине пользователя для загрузки на сервер.
- **Выбор каталога для скачивания**: Клиент предоставляет интерфейс для выбора каталога на локальной машине пользователя для скачивания файла с сервера.
- **Файловый менеджер на сервере**: Клиент предоставляет интерфейс для просмотра и выбора файлов, хранящихся на сервере, для скачивания.

### Управление паролями
- **Добавление паролей**: Клиент предоставляет интерфейс для добавления новых паролей.
- **Просмотр и редактирование паролей**: Клиент предоставляет интерфейс для просмотра и редактирования существующих паролей.

### Управление картами
- **Добавление карт**: Клиент предоставляет интерфейс для добавления новых карт.
- **Просмотр и редактирование карт**: Клиент предоставляет интерфейс для просмотра и редактирования существующих карт.

### Безопасность
- **JWT для аутентификации и авторизации**: Пользователей.
- **Шифрование временных токенов**: С использованием SSH-ключей пользователей.
- **Потоковое шифрование файлов**: Используется алгоритм ChaCha20 для обеспечения безопасной передачи данных.

### Логирование
- **Логи записываются**: В файл `logs/client.log` и `logs/server.log` и выводятся в консоль.
- **Логи содержат**: Информацию о запросах, ошибках и других событиях.

## Основные компоненты

### Клиентская часть
- **GrpcClient**: Основной клиент, который отправляет gRPC-запросы на сервер.
- **Методы**: Authenticate, RegisterUser, UploadFile, SetMetadataFile, GetStoreDataList, DownloadFile, DeleteFile.
- **Пользовательский интерфейс**: tview используется для создания пользовательского интерфейса.
- **Меню**: Основное меню для навигации по функциям клиента.

### Серверная часть
- **GrpcServer**: Основной сервер, который обрабатывает gRPC-запросы.
- **JWTInterface**: Интерфейс для работы с JWT (создание и проверка токенов).
- **Redis**: Используется для хранения временных токенов и управления сессиями.
- **GORM**: ORM для работы с PostgreSQL.
- **Middleware**: Обрабатывает аутентификацию и авторизацию запросов.

## Технологии
- **Язык программирования**: Go.
- **gRPC**: Для взаимодействия между клиентом и сервером.
- **tview**: Для создания пользовательского интерфейса.
- **ChaCha20**: Для потокового шифрования файлов.
- **PostgreSQL**: Для хранения данных пользователей и информации о файлах.
- **Redis**: Для временного хранения токенов и управления сессиями.
- **JWT**: Для аутентификации и авторизации.
- **Логирование**: Используется стандартная библиотека log/slog.

## Запуск Docker

Для запуска базы данных PostgreSQL и Redis с использованием Docker, выполните следующие шаги:

1. Убедитесь, что в корне проекта находится файл `.env` с переменными окружения.
2. Запустите Docker Compose:
    ```bash
    docker-compose up -d
    ```

## CI/CD

Проект настроен для автоматической сборки и релиза с использованием GitHub Actions. Сборка и релиз запускаются при создании тега вида `v*.*.*`. Процесс включает сборку для Linux, Windows и macOS, создание архивов с бинарными файлами и конфигурационными файлами, а также создание релиза на GitHub с включением архивов для всех платформ.
